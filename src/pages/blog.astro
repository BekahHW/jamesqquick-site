---
import BaseLayout from "../layouts/BaseLayout.astro";
import LinkCard from "../components/LinkCard.astro";

// Use Astro.glob() to fetch all posts, and then sort them by date.
const posts = (await Astro.glob("./blog/*.{md,mdx}")).sort(
  (a, b) =>
    new Date(b.frontmatter.pubDate).valueOf() -
    new Date(a.frontmatter.pubDate).valueOf()
);
---

<BaseLayout title="Blog | James Q Quick">
    <h1 class="text-6xl text-brand font-bold mb-10">Blog</h1>
    <div class="flex flex-col gap-10">
        {
            posts.map((post) => (
                <LinkCard
                    title={post.frontmatter.title}
                    date={post.frontmatter.pubDate}
                    slug={`/blog/${post.frontmatter.slug}`}
                />
                ))
        }
    </div>
</BaseLayout>
